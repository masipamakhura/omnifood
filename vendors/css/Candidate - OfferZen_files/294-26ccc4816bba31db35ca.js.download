(window.webpackJsonp=window.webpackJsonp||[]).push([[294,28],{1919:function(e,t,n){"use strict";n.r(t),n.d(t,"FETCH_STATIC_CITIES",(function(){return i})),n.d(t,"FETCH_STATIC_CITIES_SUCCESS",(function(){return c})),n.d(t,"FETCH_STATIC_CITIES_ERROR",(function(){return a})),n.d(t,"FETCH_STATIC_SUBURBS",(function(){return o})),n.d(t,"FETCH_STATIC_SUBURBS_SUCCESS",(function(){return u})),n.d(t,"FETCH_STATIC_SUBURBS_ERROR",(function(){return l})),n.d(t,"FETCH_JOB_PREFERENCE",(function(){return s})),n.d(t,"FETCH_JOB_PREFERENCE_SUCCESS",(function(){return f})),n.d(t,"FETCH_JOB_PREFERENCE_ERROR",(function(){return d})),n.d(t,"UPDATE_JOB_PREFERENCE",(function(){return b})),n.d(t,"UPDATE_JOB_PREFERENCE_SUCCESS",(function(){return p})),n.d(t,"UPDATE_JOB_PREFERENCE_ERROR",(function(){return E})),n.d(t,"TOGGLE_LOCATION_PREFERENCES",(function(){return m})),n.d(t,"fetchStaticCities",(function(){return S})),n.d(t,"fetchStaticCitiesSuccess",(function(){return h})),n.d(t,"fetchStaticCitiesError",(function(){return g})),n.d(t,"fetchStaticSuburbs",(function(){return C})),n.d(t,"fetchStaticSuburbsSuccess",(function(){return P})),n.d(t,"fetchStaticSuburbsError",(function(){return y})),n.d(t,"fetchJobPreference",(function(){return _})),n.d(t,"fetchJobPreferenceSuccess",(function(){return O})),n.d(t,"fetchJobPreferenceError",(function(){return v})),n.d(t,"updateJobPreference",(function(){return R})),n.d(t,"updateJobPreferenceSuccess",(function(){return T})),n.d(t,"updateJobPreferenceError",(function(){return w})),n.d(t,"toggleLocationPreferences",(function(){return j})),n.d(t,"getLocationPreferencesView",(function(){return I}));var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i="candidateExperience/views/locationPreferences/FETCH_STATIC_CITIES",c="candidateExperience/views/locationPreferences/FETCH_STATIC_CITIES_SUCCESS",a="candidateExperience/views/locationPreferences/FETCH_STATIC_CITIES_ERROR",o="candidateExperience/views/locationPreferences/FETCH_STATIC_SUBURBS",u="candidateExperience/views/locationPreferences/FETCH_STATIC_SUBURBS_SUCCESS",l="candidateExperience/views/locationPreferences/FETCH_STATIC_SUBURBS_ERROR",s="candidateExperience/views/locationPreferences/FETCH_JOB_PREFERENCE",f="candidateExperience/views/locationPreferences/FETCH_JOB_PREFERENCE_SUCCESS",d="candidateExperience/views/locationPreferences/FETCH_JOB_PREFERENCE_ERROR",b="candidateExperience/views/locationPreferences/UPDATE_JOB_PREFERENCE",p="candidateExperience/views/locationPreferences/UPDATE_JOB_PREFERENCE_SUCCESS",E="candidateExperience/views/locationPreferences/UPDATE_JOB_PREFERENCE_ERROR",m="candidateExperience/views/locationPreferences/TOGGLE_LOCATION_PREFERENCES",S=function(){return{type:i,payload:{fetchingStaticCities:!0,fetchStaticCitiesError:null}}},h=function(e){var t=e.result;return{type:c,payload:{fetchingStaticCities:!1,lastUpdatedStaticCities:Date.now(),staticCities:t.map((function(e){return e.id}))}}},g=function(e){return{type:a,error:!0,payload:new Error(e)}},C=function(){return{type:o,payload:{fetchingStaticSuburbs:!0,fetchStaticSuburbsError:null}}},P=function(e){var t=e.result;return{type:u,payload:{fetchingStaticSuburbs:!1,lastUpdatedStaticSuburbs:Date.now(),staticSuburbs:t.map((function(e){return e.id}))}}},y=function(e){return{type:l,error:!0,payload:new Error(e)}},_=function(e){return{type:s,meta:{id:e},payload:{fetchingJobPreference:!0,fetchJobPreferenceError:null}}},O=function(e){return{type:f,payload:{fetchingJobPreference:!1,lastUpdatedJobPreference:Date.now(),jobPreference:e.id}}},v=function(e){return{type:d,error:!0,payload:new Error(e)}},R=function(e,t,n,r){return{type:b,meta:{id:e,data:t,resolve:n,reject:r},payload:{updatingJobPreference:!0,updateJobPreferenceError:null}}},T=function(e){return{type:p,payload:{updatingJobPreference:!1,lastUpdatedJobPreference:Date.now(),jobPreference:e.id}}},w=function(e){return{type:E,error:!0,payload:new Error(e)}},j=function(e){return{type:m,payload:{editingLocationPreferences:e}}},J={staticCities:[],lastUpdatedStaticCities:null,fetchingStaticCities:!1,fetchStaticCitiesError:null,staticSuburbs:[],lastUpdatedStaticSuburbs:null,fetchingStaticSuburbs:!1,fetchStaticSuburbsError:null,jobPreference:null,lastUpdatedJobPreference:null,fetchingJobPreference:!1,fetchJobPreferenceError:null,updatingJobPreference:!1,updateJobPreferenceError:null,editingLocationPreferences:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments[1],n=t.type,S=t.payload;switch(n){case i:case c:case o:case u:case s:case f:case b:case p:case m:return r({},e,S);case a:return r({},e,{fetchingStaticCities:!1,fetchStaticCitiesError:S});case l:return r({},e,{fetchingStaticSuburbs:!1,fetchStaticSuburbsError:S});case d:return r({},e,{fetchingJobPreference:!1,fetchJobPreferenceError:S});case E:return r({},e,{updatingJobPreference:!1,updateJobPreferenceError:S});default:return e}};var I=function(e){return e.views.locationPreferences||J}},2176:function(e,t,n){"use strict";var r=n(0),i=n.n(r),c=n(1128),a=n(1130),o=n(1127),u=n(1129),l=n(858),s=n(1126),f=n(627),d=n.n(f),b=n(69),p=n(486),E=n(142),m=n(84),S=n(134),h=n(629),g=n(1890),C=n(2),P=n(3),y=n(8),_=n(6),O={cityGroup:Object(C.css)({padding:Object(y.c)([P.h.large,0]),"&:not(:last-child)":{borderBottom:"1px dashed "+_.a.mystic},"&:first-child":{paddingTop:P.h.small}}),cityCheckbox:Object(C.css)({fontWeight:P.e.bold}),suburbField:Object(C.css)({marginTop:P.h.large}),suburbCheckbox:Object(C.css)({marginBottom:P.h.small}),selectedSuburbs:Object(C.css)({margin:Object(y.c)([P.h.default,0,-P.h.small])}),suburbTag:Object(C.css)({marginRight:P.h.small,marginBottom:P.h.small}),relocationCheckbox:Object(C.css)({fontWeight:P.e.bold,padding:Object(y.c)([P.h.large,0])})},v=function(e){var t=e.fields,n=e.availableSuburbs;return t.map((function(e,r){return function(e){return i.a.createElement(p.a,{key:r,text:e&&e.name,onClear:function(){return t.remove(r)},theme:"primary",className:O.suburbTag})}.call(this,n.find((function(e){return e.id===t.get(r)})))}),this)},R=Object(u.a)({form:"locationPreferences",enableReinitialize:!0,onSubmit:function(e,t,n){return new Promise((function(t,r){var i=e.cities,c=e.suburbs,a=e.open_to_international_relocation,o=Object.keys(i).filter((function(e){return i[e]}));if(0===o.length)throw new l.a({_error:"Please select at least one city"});var u={city_ids:o,suburb_ids:d()(Object.values(c)),open_to_international_relocation:a};n.updateJobPreference(u,t,r)}))},onSubmitSuccess:function(e,t,n){return n.toggleEditing(!1)}})(Object(s.a)({openToInternationalRelocation:"open_to_international_relocation",cities:"cities",suburbs:"suburbs"})((function(e){return i.a.createElement("form",{onSubmit:e.handleSubmit},e.error?i.a.createElement(m.a,{text:e.error}):null,i.a.createElement("div",null,e.availableLocations.map((function(t,n){return i.a.createElement("div",{className:O.cityGroup,key:t.id},i.a.createElement(c.a,{name:"cities"},i.a.createElement(a.a,{id:t.id,name:t.id,label:t.name,theme:"primary",component:E.a,className:O.cityCheckbox,onChange:function(n){return!n.target.checked&&e.change("suburbs."+t.id,[])}})),e.cities&&e.cities[t.id]&&"Remote"!==t.name?[i.a.createElement("div",{className:O.suburbField,key:"0"},i.a.createElement(b.a,{label:"Which suburbs are you looking to work in?",htmlFor:"suburb-dropdown-"+t.id}),i.a.createElement(h.b,{label:"- select suburb -",name:"suburbs",value:e.suburbs[t.id],onSelect:function(n,r){return e.change("suburbs."+t.id,r)}},t.suburbs.map((function(e,t){return i.a.createElement(h.a,{key:e.id,id:e.id,label:e.name})}),this))),i.a.createElement("div",{className:O.selectedSuburbs,key:"1"},i.a.createElement(o.a,{name:"suburbs."+t.id,component:v,availableSuburbs:t.suburbs}))]:null)}),this),e.internationalRelocationEnabled?[i.a.createElement(a.a,{id:"open-to-international-relocation",name:"open_to_international_relocation",label:"I am open to relocating internationally",component:E.a,className:O.relocationCheckbox,key:"0"}),e.openToInternationalRelocation?i.a.createElement(S.a,{theme:"light",key:"1"},"This is an experimental feature. If you select this option you may receive interview requests from companies based outside of South Africa, so it's important that you are actually open to make the move."):null]:null),i.a.createElement(g.a,{loading:e.updatingLocations,disableSubmit:e.pristine,showCancel:!0,cancelEditing:function(){return e.toggleEditing(!1)},theme:"primary"}))})));t.a=R},2177:function(e,t,n){"use strict";var r=n(0),i=n.n(r),c=n(66),a=n(486),o=n(134),u=n(2),l=n(3),s=n(8),f={cityList:Object(u.css)({margin:0,display:"flex",flexWrap:"wrap"}),city:Object(u.css)({width:"100%","&:not(:first-child)":{marginTop:l.h.medium}}),cityName:Object(u.css)({fontWeight:l.e.bold}),suburb:Object(u.css)({margin:Object(s.c)([l.h.default,l.h.default,0,0])}),notification:Object(u.css)({margin:Object(s.c)([l.h.default,0,0]),width:"100%"})};var d=function(e){var t=e.preferredLocations,n=e.toggleEditing,r=e.trackCompletionAction,u=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["preferredLocations","toggleEditing","trackCompletionAction"]);return i.a.createElement("dl",{className:f.cityList},t.map((function(e,t){return[i.a.createElement("dt",{className:f.city,key:e.id},i.a.createElement(c.a,{className:f.cityName},"Remote"===e.name?"I would be willing to work remotely.":e.name)),e.suburbs&&e.suburbs.length>0?e.suburbs.map((function(e,t){return i.a.createElement("dd",{className:f.suburb,key:e.id},i.a.createElement(a.a,{text:e.name}))}),this):"Remote"!==e.name?i.a.createElement("dd",{className:f.notification,key:"1"},i.a.createElement(o.a,{icon:"bell",action:"Select a suburb",onActionClick:function(){n(!0),r()},theme:"warning"},"You need to select at least one suburb you are looking to work in.")):null]}),this),u.internationalRelocationEnabled&&u.openToInternationalRelocation?i.a.createElement("dt",{className:f.city},i.a.createElement(c.a,{className:f.cityName},"I am open to relocating internationally.")):null)};t.a=d},2178:function(e,t,n){"use strict";var r=n(0),i=n(17),c=n(1),a=n.n(c),o=n(3),u=n(8),l=n(795),s=n(275),f=n(1919),d=n(1912),b=n(1913),p=n(11),E=n(1213),m=n(1214),S=n(951),h=n(565),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C=Object(p.createSelector)(f.getLocationPreferencesView,(function(e){return e.fetchingStaticCities||e.fetchingStaticSuburbs||e.fetchingJobPreference||!e.lastUpdatedStaticCities||!e.lastUpdatedStaticSuburbs||!e.lastUpdatedJobPreference})),P=Object(p.createSelector)([f.getLocationPreferencesView,E.c],(function(e,t){return e.staticCities.map((function(e){var n=t[e];if(n)return{id:e,name:n.name}})).filter((function(e){return e}))})),y=Object(p.createSelector)([f.getLocationPreferencesView,m.c],(function(e,t){return e.staticSuburbs.map((function(e){var n=t[e];return{id:e,name:n.name,city:n.city.id}})).reduce((function(e,t){return e[t.city]||(e[t.city]=[]),e[t.city]=[].concat(e[t.city],[t]),e}),{})})),_=Object(p.createSelector)([P,y],(function(e,t){return e.map((function(e){return g({},e,{suburbs:t[e.id]})}))})),O=Object(p.createSelector)([f.getLocationPreferencesView,S.getJobPreferencesMap],(function(e,t){var n=t[e.jobPreference];if(!n)return[];var r=n.cities;return r&&0!==r.length?r.map((function(e){return g({},e,{suburbs:n.suburbs?n.suburbs.filter((function(t){return t.city.id===e.id})):[]})})):[]})),v=Object(p.createSelector)([f.getLocationPreferencesView,S.getJobPreferencesMap],(function(e,t){var n=t[e.jobPreference];return!!n&&n.open_to_international_relocation})),R=Object(p.createSelector)(O,v,(function(e,t){var n={cities:{},suburbs:{}};if(!e||0===e.length)return n;var r=e.reduce((function(e,t){var n,r;return{cities:g({},e.cities,(n={},n[t.id]=!0,n)),suburbs:g({},e.suburbs,(r={},r[t.id]=t.suburbs.map((function(e){return e.id})),r))}}),n);return g({},r,{open_to_international_relocation:t})})),T=Object(p.createSelector)(f.getLocationPreferencesView,(function(e){return e.updatingJobPreference})),w=Object(p.createSelector)(f.getLocationPreferencesView,(function(e){return e.editingLocationPreferences})),j=(Object(p.createSelector)(s.e,(function(e){return e.completion_percentage})),Object(p.createSelector)(h.g,(function(e){return e.current_state})),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e});var J=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.fetchStaticCities(),this.props.fetchStaticSuburbs(),this.props.fetchJobPreference(),Object(u.a)(o.b.phone)||(this.props.fetchProfileCompletion(),this.props.trackMobileView())},t.prototype.render=function(){var e=this.props;return(0,e.children)(function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["children"]))},t}(r.Component);J.propTypes={candidateId:a.a.string.isRequired,children:a.a.func};var I=Object(i.connect)((function(e){return{loading:C(e),preferredLocations:O(e),availableLocations:_(e),initialValues:R(e),updatingLocations:T(e),completionPercentage:Object(d.a)(e),openToInternationalRelocation:v(e),internationalRelocationEnabled:e.static_data.features.international_relocation_enabled,currentState:Object(b.a)(e),editing:w(e)}}),(function(e,t){var n=t.candidateId;return{trackMobileView:function(){e(l.b("Candidate: viewed mobile profile section",{section:"locations"}))},fetchStaticCities:function(){return e(f.fetchStaticCities())},fetchStaticSuburbs:function(){return e(f.fetchStaticSuburbs())},fetchJobPreference:function(){return e(f.fetchJobPreference(n))},updateJobPreference:function(t,r,i,c,a){e(f.updateJobPreference(n,t,r,i)),e(l.b("Candidate: profile action",{section:"updated locations",completionPercentage:c,currentState:a}))},toggleEditing:function(t){return e(f.toggleLocationPreferences(t))},trackCompletionAction:function(t,n){e(l.b("Candidate: completion action",{section:"location-preferences",completionPercentage:t,candidateState:n}))},fetchProfileCompletion:function(){e(s.c(n))}}}),(function(e,t,n){return j({},e,t,n,{trackCompletionAction:function(){t.trackCompletionAction(e.completionPercentage,e.currentState)},updateJobPreference:function(n,r,i){t.updateJobPreference(n,r,i,e.completionPercentage,e.currentState)}})}))(J);t.a=I},2360:function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),c=n(2044),a=n(2178),o=n(2176),u=n(2177),l=n(1258);t.default=function(e){var t=e.incompleteSections,n=e.candidateId;return i.a.createElement(a.a,{candidateId:n},(function(e){var n=e.editing,r=e.loading,a=e.toggleEditing,s=e.preferredLocations,f=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["editing","loading","toggleEditing","preferredLocations"]);return r?i.a.createElement(l.a,null):i.a.createElement(c.b,{anchorId:"preferred-location",complete:!t.includes("suburbs"),heading:"Where would you like to work?",showCheck:!0,toggleEditing:a,editing:n},n||0===s.length?i.a.createElement(o.a,{toggleEditing:a,availableLocations:f.availableLocations,updateJobPreference:f.updateJobPreference,initialValues:f.initialValues,updatingLocations:f.updatingLocations,internationalRelocationEnabled:f.internationalRelocationEnabled}):i.a.createElement(u.a,{preferredLocations:s,toggleEditing:a,trackCompletionAction:f.trackCompletionAction,openToInternationalRelocation:f.openToInternationalRelocation,internationalRelocationEnabled:f.internationalRelocationEnabled}))}))}},627:function(e,t,n){var r=n(1029);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}}}]);
//# sourceMappingURL=294-26ccc4816bba31db35ca.js.map
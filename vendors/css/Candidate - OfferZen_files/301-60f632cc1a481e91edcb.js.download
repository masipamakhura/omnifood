(window.webpackJsonp=window.webpackJsonp||[]).push([[301,27],{1899:function(e,t,r){"use strict";r.r(t),r.d(t,"FETCH_CITIZENSHIP",(function(){return i})),r.d(t,"FETCH_CITIZENSHIP_SUCCESS",(function(){return a})),r.d(t,"FETCH_CITIZENSHIP_ERROR",(function(){return c})),r.d(t,"FETCH_CITIZENSHIP_ATTACHMENTS",(function(){return u})),r.d(t,"FETCH_CITIZENSHIP_ATTACHMENTS_SUCCESS",(function(){return s})),r.d(t,"FETCH_CITIZENSHIP_ATTACHMENTS_ERROR",(function(){return o})),r.d(t,"UPDATE_CITIZENSHIP",(function(){return p})),r.d(t,"UPDATE_CITIZENSHIP_SUCCESS",(function(){return d})),r.d(t,"UPDATE_CITIZENSHIP_ERROR",(function(){return h})),r.d(t,"TOGGLE_CITIZENSHIP_STATUS",(function(){return f})),r.d(t,"fetchCitizenship",(function(){return l})),r.d(t,"fetchCitizenshipSuccess",(function(){return m})),r.d(t,"fetchCitizenshipError",(function(){return _})),r.d(t,"fetchCitizenshipAttachments",(function(){return C})),r.d(t,"fetchCitizenshipAttachmentsSuccess",(function(){return w})),r.d(t,"fetchCitizenshipAttachmentsError",(function(){return S})),r.d(t,"updateCitizenship",(function(){return b})),r.d(t,"updateCitizenshipSuccess",(function(){return E})),r.d(t,"updateCitizenshipError",(function(){return v})),r.d(t,"toggleCitizenshipStatus",(function(){return z})),r.d(t,"getCitizenshipStatusView",(function(){return k}));var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},i="candidateExperience/views/citizenshipStatus/FETCH_CITIZENSHIP",a="candidateExperience/views/citizenshipStatus/FETCH_CITIZENSHIP_SUCCESS",c="candidateExperience/views/citizenshipStatus/FETCH_CITIZENSHIP_ERROR",u="candidateExperience/views/citizenshipStatus/FETCH_CITIZENSHIP_ATTACHMENTS",s="candidateExperience/views/citizenshipStatus/FETCH_CITIZENSHIP_ATTACHMENTS_SUCCESS",o="candidateExperience/views/citizenshipStatus/FETCH_CITIZENSHIP_ATTACHMENTS_ERROR",p="candidateExperience/views/citizenshipStatus/UPDATE_CITIZENSHIP",d="candidateExperience/views/citizenshipStatus/UPDATE_CITIZENSHIP_SUCCESS",h="candidateExperience/views/citizenshipStatus/UPDATE_CITIZENSHIP_ERROR",f="candidateExperience/views/citizenshipStatus/TOGGLE_CITIZENSHIP_STATUS",l=function(e){return{type:i,meta:{id:e},payload:{fetchingCitizenship:!0,fetchCitizenshipError:null}}},m=function(e){return{type:a,payload:{fetchingCitizenship:!1,lastUpdatedCitizenship:Date.now(),citizenship:e.id}}},_=function(e){return{type:c,error:!0,payload:new Error(e)}},C=function(e){return{type:u,meta:{citizenshipId:e},payload:{fetchingAttachments:!0,fetchAttachmentsError:null}}},w=function(e){return{type:s,payload:{fetchingAttachments:!1,lastUpdatedAttachments:Date.now(),attachments:e.map((function(e){return e.id}))}}},S=function(e){return{type:o,error:!0,payload:new Error(e)}},b=function(e,t,r,n){return{type:p,meta:{id:e,data:t,resolve:r,reject:n},payload:{updatingCitizenship:!0,updateCitizenshipError:null}}},E=function(e){return{type:d,payload:{updatingCitizenship:!1,lastUpdatedCitizenship:Date.now(),citizenship:e.id}}},v=function(e){return{type:h,error:!0,payload:new Error(e)}},z=function(e){return{type:f,payload:{editingCitizenshipStatus:e}}},y={citizenship:null,lastUpdatedCitizenship:null,fetchingCitizenship:!1,fetchCitizenshipError:null,updatingCitizenship:!1,updateCitizenshipError:null,attachments:[],lastUpdatedAttachments:null,fetchingAttachments:!1,fetchAttachmentsError:null,editingCitizenshipStatus:!1};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments[1],r=t.type,l=t.payload;switch(r){case i:case a:case u:case s:case p:case d:case f:return n({},e,l);case c:return n({},e,{fetchingCitizenship:!1,fetchCitizenshipError:l});case o:return n({},e,{fetchingAttachments:!1,fetchAttachmentsError:l});case h:return n({},e,{updatingCitizenship:!1,updateCitizenshipError:l});default:return e}};var k=function(e){return e.views.citizenshipStatus||y}},1921:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"c",(function(){return u})),r.d(t,"a",(function(){return s})),r.d(t,"d",(function(){return o}));var n=r(34),i=r.n(n),a=function(e){switch(e.permit_type){case"other":return"Other Permit";case"study":return"Study Permit";case"critical_skills":return"Critical Skills Permit - "+e.critical_skill;case"general_work":return e.permit_requires_critical_skill?"General Work Permit - "+e.critical_skill:"General Work Permit";default:return"I have a permit to work or study in South Africa"}},c=function(e){switch(e.citizenship_status){case"citizen":return["South African citizen"];case"permanent_resident":return["Permanent resident","You are able to work for any company in South Africa without restrictions."];case"not_authorized_for_work":return["Not currently authorised to work in South Africa","You will need to apply for a Critical Skills or General work permit before you can work in South Africa. Once you have a permit, OfferZen can help you to find a job."];case"work_permit":return e.permit_type?[a(e),"Expiring on "+i()(e.permit_expires_at,"D MMMM YYYY")].concat(function(e){switch(e.permit_type){case"other":return["Permit details: "+e.other_permit_details+".","Please reach out to your talent advisor to review the terms of your permit."];case"study":return["Your permit allows you to work for 20 hours a week. You will need an offer from a South African company to apply for a Critical Skills or General Work Permit."];case"general_work":var t=[];return e.permit_requires_critical_skill||e.permit_dependant_on_current_company||t.push("Your current permit allows you to work for any company in South Africa."),e.permit_requires_critical_skill&&t.push("Your current permit allows you to work for any company in South Africa as: "+e.critical_skill+"."),e.permit_dependant_on_current_company&&t.push("Your current employer’s name appears on your permit. You will need to apply for a change in conditions when you accept a job offer with a new company. This can take 6-8 weeks."),t.push("General Work permits cannot be renewed. You should look into applying for a Critical Skills permit."),t;case"critical_skills":return e.permit_dependant_on_current_company?["Your current employer’s name appears on your permit. You will need to apply for a change in conditions when you accept a job offer with a new company. This can take 6-8 weeks."]:["Your current permit allows you to work for any company in South Africa."];default:return[]}}(e)):[a(e)];default:return[]}},u=function(e){switch(e){case"citizen":return"flag";case"not_authorized_for_work":return"world";case"permanent_resident":case"work_permit":return"document";default:return""}},s={citizen:{id:"citizen",label:"Citizen"},permanent_resident:{id:"permanent_resident",label:"Permanent Resident"},work_permit:{id:"work_permit",label:"Work Permit"},not_authorized_for_work:{id:"not_authorized_for_work",label:"Not Authorized For Work"}},o={general_work:{id:"general_work",label:"General Work"},critical_skills:{id:"critical_skills",label:"Critical Skills"},study:{id:"study",label:"Study"},other:{id:"other",label:"Other"}}},1936:function(e,t,r){"use strict";r.d(t,"f",(function(){return p})),r.d(t,"a",(function(){return d})),r.d(t,"d",(function(){return h})),r.d(t,"g",(function(){return f})),r.d(t,"b",(function(){return l})),r.d(t,"e",(function(){return m})),r.d(t,"c",(function(){return _}));var n=r(11),i=r(597),a=r.n(i),c=r(1899),u=r(947),s=r(948),o=r(1921),p=Object(n.createSelector)(c.getCitizenshipStatusView,(function(e){return e.fetchingCitizenship||!e.lastUpdatedCitizenship})),d=Object(n.createSelector)([c.getCitizenshipStatusView,s.getCitizenshipAttachmentMap],(function(e,t){return e.attachments.map((function(e){var r=t[e];if(r)return{id:r.id,name:r.file_name,url:r.file_url}})).filter((function(e){return e}))})),h=Object(n.createSelector)(c.getCitizenshipStatusView,(function(e){return e.editingCitizenshipStatus})),f=Object(n.createSelector)([c.getCitizenshipStatusView,u.getCitizenshipMap,d],(function(e,t,r){var n=t[e.citizenship];return n?{icon:Object(o.c)(n.citizenship_status),description:Object(o.b)(n),attachments:r}:{}})),l=Object(n.createSelector)([c.getCitizenshipStatusView,u.getCitizenshipMap,d],(function(e,t,r){var n=t[e.citizenship];return n?{citizenship_status:n.citizenship_status,permit_type:n.permit_type,permit_expires_at:n.permit_expires_at,critical_skill:n.critical_skill,other_permit_details:n.other_permit_details,permit_requires_critical_skill:a()(n.permit_requires_critical_skill),permit_dependant_on_current_company:a()(n.permit_dependant_on_current_company),id:n.id,attachments:r}:{}})),m=Object(n.createSelector)([c.getCitizenshipStatusView,u.getCitizenshipMap],(function(e,t){var r=t[e.citizenship];return!!r&&!!r.citizenship_status})),_=Object(n.createSelector)([c.getCitizenshipStatusView,u.getCitizenshipMap],(function(e,t){var r=e.citizenship,n=e.attachments,i=t[r];if(!i)return!1;var a=i.citizenship_status,c=i.permit_type,u=i.permit_expires_at,s=i.critical_skill,o=i.permit_dependant_on_current_company,p=i.other_permit_details,d=i.permit_requires_critical_skill;if(["citizen","permanent_resident","not_authorized_for_work"].includes(a))return!0;if("work_permit"===a&&c&&u&&n.length>0){if("study"===c)return!0;if("other"===c&&p)return!0;if("critical_skills"===c&&s&&null!==o)return!0;if("general_work"===c&&null!==d&&null!==o)return!0}return!1}))},2344:function(e,t,r){"use strict";r.r(t);var n=r(7),i=r(858),a=r(19),c=r(172),u=r(13),s=r.n(u),o=r(14),p=r.n(o);function d(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(i,a){try{var c=t[i](a),u=c.value}catch(e){return void r(e)}if(!c.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}var h,f,l=function(e){return"/api/candidate/v2/candidate_profiles/"+e+"/citizenships"},m=(h=d(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()(l(t),{method:"GET"});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,void 0)}))),function(e){return h.apply(this,arguments)}),_=(f=d(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()(l(t),{method:"PATCH",headers:p.a.authenticityHeaders(),data:r});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return f.apply(this,arguments)}),C=r(635),w=regeneratorRuntime.mark(b),S=regeneratorRuntime.mark(E);function b(e){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(n.b)(m,e);case 2:return t=r.sent,r.next=5,Object(n.f)(C.c.addItem(t.result.id,t.result));case 5:return r.abrupt("return",t);case 6:case"end":return r.stop()}}),w,this)}function E(e,t){var r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(n.b)(_,e,t);case 2:return r=i.sent,i.next=5,Object(n.f)(C.c.updateItem(r.result.id,r.result));case 5:return i.abrupt("return",r);case 6:case"end":return i.stop()}}),S,this)}function v(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,r){return function n(i,a){try{var c=t[i](a),u=c.value}catch(e){return void r(e)}if(!c.done)return Promise.resolve(u).then((function(e){n("next",e)}),(function(e){n("throw",e)}));e(u)}("next")}))}}var z,y=function(e){return"/api/candidate/v2/citizenships/"+e+"/attachments"},k=function(){var e=v(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()(y(t),{method:"GET"});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e,void 0)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=v(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()(y(t),{method:"POST",headers:p.a.authenticityHeaders(),data:r});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,void 0)})));return function(t,r){return e.apply(this,arguments)}}(),x=(z=v(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()(y(t)+"/"+r,{method:"DELETE",headers:p.a.authenticityHeaders()});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return z.apply(this,arguments)}),T=regeneratorRuntime.mark(j),I=regeneratorRuntime.mark(A),O=regeneratorRuntime.mark(P);function j(e){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(n.b)(k,e);case 2:return t=r.sent,r.next=5,Object(n.f)(C.b.addCollection(t.result));case 5:return r.abrupt("return",t);case 6:case"end":return r.stop()}}),T,this)}function A(e,t){var r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(n.b)(g,e,t);case 2:return r=i.sent,i.next=5,Object(n.f)(C.b.addItem(r.result.id,r.result));case 5:return i.abrupt("return",r);case 6:case"end":return i.stop()}}),I,this)}function P(e,t){var r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(n.b)(x,e,t);case 2:return r=i.sent,i.next=5,Object(n.f)(C.b.deleteItem(id));case 5:return i.abrupt("return",r);case 6:case"end":return i.stop()}}),O,this)}var H=r(275),R=r(1899),N=r(1936);r.d(t,"fetchCitizenshipSaga",(function(){return D})),r.d(t,"fetchCitizenshipAttachmentsSaga",(function(){return G})),r.d(t,"default",(function(){return W}));var Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U=regeneratorRuntime.mark(D),M=regeneratorRuntime.mark(G),Y=regeneratorRuntime.mark(V),F=regeneratorRuntime.mark(W);function D(e){var t,r,i,u=e.meta;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(n.b)(b,u.id);case 3:return t=e.sent,e.next=6,Object(n.f)(R.fetchCitizenshipSuccess(t.result));case 6:return e.next=8,Object(n.f)(R.fetchCitizenshipAttachments(t.result.id));case 8:e.next=18;break;case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,Object(n.b)(a.a,c.a,e.t0);case 14:return r=e.sent,i=r.error,e.next=18,Object(n.f)(R.fetchCitizenshipError(i));case 18:case"end":return e.stop()}}),U,this,[[0,10]])}function G(e){var t,r,i,u=e.meta;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(n.b)(j,u.citizenshipId);case 3:return t=e.sent,e.next=6,Object(n.f)(R.fetchCitizenshipAttachmentsSuccess(t.result));case 6:e.next=16;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(n.b)(a.a,c.a,e.t0);case 12:return r=e.sent,i=r.error,e.next=16,Object(n.f)(R.fetchCitizenshipError(i));case 16:case"end":return e.stop()}}),M,this,[[0,8]])}function V(e){var t,r,u,s,o,p,d,h,f,l,m=e.meta;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=m.data.attachments||{},e.next=4,Object(n.g)(N.a,m.id);case 4:return r=e.sent,u=Z({},m.data,{attachments:void 0}),e.next=8,Object(n.b)(E,m.id,u);case 8:return s=e.sent,e.next=11,Object(n.f)(R.updateCitizenshipSuccess(s.result));case 11:if(e.prev=11,!((o=t.filter((function(e){return null==e.id}))).length>0)){e.next=16;break}return e.next=16,Object(n.a)(o.map((function(e){return Object(n.b)(A,u.id,{file_name:e.name,file_url:e.url})})));case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(11),e.next=22,Object(n.b)(a.a,c.a,e.t0);case 22:if(e.prev=22,p=r.map((function(e){return e.id})),d=t.filter((function(e){return null!=e.id})).map((function(e){return e.id})),!((h=p.filter((function(e){return!d.includes(e)}))).length>0)){e.next=29;break}return e.next=29,Object(n.a)(h.map((function(e){return Object(n.b)(P,u.id,e)})));case 29:e.next=35;break;case 31:return e.prev=31,e.t1=e.catch(22),e.next=35,Object(n.b)(a.a,c.a,e.t1);case 35:return e.next=37,Object(n.f)(R.fetchCitizenshipAttachments(u.id));case 37:return e.next=39,Object(n.b)(m.resolve);case 39:return e.next=41,Object(n.f)(H.c(m.id));case 41:e.next=53;break;case 43:return e.prev=43,e.t2=e.catch(0),e.next=47,Object(n.b)(a.a,c.a,e.t2);case 47:return f=e.sent,l=f.error,e.next=51,Object(n.f)(R.updateCitizenshipError(l));case 51:return e.next=53,Object(n.b)(m.reject,new i.a({_error:l}));case 53:case"end":return e.stop()}}),Y,this,[[0,43],[11,18],[22,31]])}function W(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.j)(R.FETCH_CITIZENSHIP,D);case 2:return e.next=4,Object(n.j)(R.FETCH_CITIZENSHIP_ATTACHMENTS,G);case 4:return e.next=6,Object(n.j)(R.UPDATE_CITIZENSHIP,V);case 6:case"end":return e.stop()}}),F,this)}}}]);
//# sourceMappingURL=301-60f632cc1a481e91edcb.js.map